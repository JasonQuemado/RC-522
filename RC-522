import RPi.GPIO as GPIO
from mfrc522 import SimpleMFRC522

class Rfid:
    
    def __init__(self):
        GPIO.setwarnings(False) # Desactiva warnings de GPIO
        GPIO.setmode(GPIO.BOARD)
        self.reader = SimpleMFRC522()

    def read_uid(self):
        try:
            print("Esperando un tag...")
            uid, _ = self.reader.read()
            uid = f"{id:08X}" 
            print(f"Id de la tarjeta (HEX): {uid}")
            return uid

        except Exception as e:
            print(f"Error: {e}")
        finally:
            self.cleanup()

    def cleanup(self):
        GPIO.cleanup()

if __name__ == "__main__":
    rf = Rfid()
    uid = rf.read_uid()
    #print(f"UID le√≠do: {uid}")
    rf.cleanup()

